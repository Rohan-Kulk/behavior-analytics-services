***Generating and downlaoding the file to COS***
---
1. Set the Environment Variable X_API_KEY
```copy
 export X_API_KEY='<your api key>'
```


2. Send the request to generate backup. Backup format can be csv / json, dates in format yyyy-MM-dd	
```copy
java -jar airgap-cli.jar generate [backup format] [from-date] [to-date]
```
The command returns a unique identifier.

3. Check the status of the request using the identifier output by the above command.
```copy
java -jar airgap-cli.jar status [identifier]
```

4. Once the status of the request is "Complete", the backup can be downloaded.
```copy
java -jar airgap-cli.jar download [identifier] [download directory]
```
The command will download a zip file with the name same as the identifier.

***Uploading the file to COS***
---

5. Create a JSON file with the COS details. Fill in the COS details.
```copy
cat <<'EOF'>cos_service_creds.json
{
  "apikey": "",
  "cos_hmac_keys": {
    "access_key_id": "",
    "secret_access_key": ""
  },
  "endpoints": "",
  "iam_apikey_description": "",
  "iam_apikey_name": "POC_SERVICE_CREDS",
  "iam_role_crn": "crn:v1:bluemix:public:iam::::serviceRole:Writer",
  "iam_serviceid_crn": "crn:v1:bluemix:public:iam-identity::",
  "resource_instance_id": "crn:v1:bluemix:public:cloud-object-storage:global:",
  "region": "jp-tok"
}
EOF
```

6. Upload to COS. Give the complete path to backup file downloaded above
```copy
java -jar airgap-cli.jar cos-upload cos_service_creds.json <path/name of backup file>
```

7. Check if the file is uploaded to COS
```copy
java -jar airgap-cli.jar cos-list cos_service_creds.json
```